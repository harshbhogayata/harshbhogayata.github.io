<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chmod Calculator | Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body class="bg-black text-gray-300">

    <main class="pt-32 pb-20 container mx-auto px-6 max-w-3xl">
        <a href="../tools.html" class="text-gray-500 hover:text-white mb-8 inline-block font-mono"><i
                class="fas fa-arrow-left mr-2"></i>Back to Tools</a>

        <div class="bg-gray-900 border border-gray-800 rounded-xl p-8 shadow-2xl">
            <h1 class="text-2xl font-bold text-white font-mono mb-6 flex items-center">
                <i class="fas fa-calculator text-green-500 mr-3"></i>Chmod Calculator
            </h1>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <!-- Owner -->
                <div class="bg-black/50 p-4 rounded border border-gray-800">
                    <h3 class="text-green-400 font-bold mb-4 text-center">Owner</h3>
                    <div class="space-y-2">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600"
                                data-val="400" data-char="r">
                            <span class="ml-2 font-mono">Read (4)</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600"
                                data-val="200" data-char="w">
                            <span class="ml-2 font-mono">Write (2)</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600"
                                data-val="100" data-char="x">
                            <span class="ml-2 font-mono">Execute (1)</span>
                        </label>
                    </div>
                </div>

                <!-- Group -->
                <div class="bg-black/50 p-4 rounded border border-gray-800">
                    <h3 class="text-green-400 font-bold mb-4 text-center">Group</h3>
                    <div class="space-y-2">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600"
                                data-val="40" data-char="r">
                            <span class="ml-2 font-mono">Read (4)</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600"
                                data-val="20" data-char="w">
                            <span class="ml-2 font-mono">Write (2)</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600"
                                data-val="10" data-char="x">
                            <span class="ml-2 font-mono">Execute (1)</span>
                        </label>
                    </div>
                </div>

                <!-- Public -->
                <div class="bg-black/50 p-4 rounded border border-gray-800">
                    <h3 class="text-green-400 font-bold mb-4 text-center">Public</h3>
                    <div class="space-y-2">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600" data-val="4"
                                data-char="r">
                            <span class="ml-2 font-mono">Read (4)</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600" data-val="2"
                                data-char="w">
                            <span class="ml-2 font-mono">Write (2)</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox"
                                class="perm-check form-checkbox text-green-500 bg-gray-800 border-gray-600" data-val="1"
                                data-char="x">
                            <span class="ml-2 font-mono">Execute (1)</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 p-6 rounded-xl text-center">
                <div class="grid grid-cols-2 gap-8">
                    <div>
                        <p class="text-gray-400 text-xs uppercase tracking-widest mb-2">Octal</p>
                        <p id="octal-res" class="text-4xl font-bold text-white font-mono">000</p>
                    </div>
                    <div>
                        <p class="text-gray-400 text-xs uppercase tracking-widest mb-2">Symbolic</p>
                        <p id="symbol-res" class="text-4xl font-bold text-green-400 font-mono">---------</p>
                    </div>
                </div>
                <div class="mt-6 pt-6 border-t border-gray-700">
                    <code id="command-res" class="text-pink-400 font-mono">chmod 000 filename</code>
                </div>
            </div>
        </div>
    </main>

    <script src="../../js/main.js"></script>
    <script>
        const checkboxes = document.querySelectorAll('.perm-check');

        checkboxes.forEach(cb => {
            cb.addEventListener('change', updateChmod);
        });

        function updateChmod() {
            let octal = 0;
            let symbolArr = ['-', '-', '-', '-', '-', '-', '-', '-', '-'];

            checkboxes.forEach((cb, index) => {
                if (cb.checked) {
                    octal += parseInt(cb.dataset.val);
                    // Map index to symbol position logic
                    // Owner: 0,1,2 -> r,w,x
                    // Group: 3,4,5 -> r,w,x
                    // Public: 6,7,8 -> r,w,x
                    // But our checkboxes are in DOM order, let's rely on data-char and simple logic
                }
            });

            // Recalculate symbolic string manually for correctness
            let o = 0, g = 0, p = 0;

            // Owner
            if (checkboxes[0].checked) { o += 4; symbolArr[0] = 'r'; }
            if (checkboxes[1].checked) { o += 2; symbolArr[1] = 'w'; }
            if (checkboxes[2].checked) { o += 1; symbolArr[2] = 'x'; }

            // Group
            if (checkboxes[3].checked) { g += 4; symbolArr[3] = 'r'; }
            if (checkboxes[4].checked) { g += 2; symbolArr[4] = 'w'; }
            if (checkboxes[5].checked) { g += 1; symbolArr[5] = 'x'; }

            // Public
            if (checkboxes[6].checked) { p += 4; symbolArr[6] = 'r'; }
            if (checkboxes[7].checked) { p += 2; symbolArr[7] = 'w'; }
            if (checkboxes[8].checked) { p += 1; symbolArr[8] = 'x'; }

            const octalStr = `${o}${g}${p}`;

            document.getElementById('octal-res').innerText = octalStr;
            document.getElementById('symbol-res').innerText = symbolArr.join('');
            document.getElementById('command-res').innerText = `chmod ${octalStr} filename`;
        }
    </script>
</body>

</html>